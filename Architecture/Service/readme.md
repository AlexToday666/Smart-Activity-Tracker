# Сервисный слой

## Ответственность

Сервисный слой инкапсулирует бизнес-логику, трансакции и проверки входных параметров. Здесь же выполняются запросы к репозиторию и агрегации для аналитики.

## Основной класс

- `EventService` — центральный сервис для событий и аналитики.

## Ключевые обязанности

- Создание событий и установка `eventTime` по умолчанию.
- CRUD и выборки с фильтрами.
- Проверка корректности диапазона времени (`from` не позже `to`).
- Агрегации для DAU и счётчиков по типам.

## Транзакционность

Класс помечен `@Transactional`, методы чтения помечены `@Transactional(readOnly = true)`.

## Ошибки

- `NotFoundException` — при попытке обновить/удалить несуществующее событие.
- `IllegalArgumentException` — при некорректном диапазоне дат (например, `from > to`).

## Точки расширения

- Добавить новый метод в сервис для нового сценария аналитики.
- Вынести сложные расчёты в отдельные сервисы и подключить их сюда.
